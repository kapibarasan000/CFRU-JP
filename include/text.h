#ifndef GUARD_TEXT_H
#define GUARD_TEXT_H

#include "global.h"

#define CHAR_SPACE          0x00
#define CHAR_aa 0x1
#define CHAR_ii 0x2
#define CHAR_uu 0x3
#define CHAR_ee 0x4
#define CHAR_oo 0x5
#define CHAR_ka 0x6
#define CHAR_ki 0x7
#define CHAR_ku 0x8
#define CHAR_ke 0x9
#define CHAR_ko 0x0A
#define CHAR_sa 0x0B
#define CHAR_si 0x0C
#define CHAR_su 0x0D
#define CHAR_se 0x0E
#define CHAR_so 0x0F
#define CHAR_ta 0x10
#define CHAR_ti 0x11
#define CHAR_tu 0x12
#define CHAR_te 0x13
#define CHAR_to 0x14
#define CHAR_na 0x15
#define CHAR_ni 0x16
#define CHAR_nu 0x17
#define CHAR_ne 0x18
#define CHAR_no 0x19
#define CHAR_ha 0x1A
#define CHAR_hi 0x1B
#define CHAR_hu 0x1C
#define CHAR_he 0x1D
#define CHAR_ho 0x1E
#define CHAR_ma 0x1F
#define CHAR_mi 0x20
#define CHAR_mu 0x21
#define CHAR_me 0x22
#define CHAR_mo 0x23
#define CHAR_ya 0x24
#define CHAR_yu 0x25
#define CHAR_yo 0x26
#define CHAR_ra 0x27
#define CHAR_ri 0x28
#define CHAR_ru 0x29
#define CHAR_re 0x2A
#define CHAR_ro 0x2B
#define CHAR_wa 0x2C
#define CHAR_wo 0x2D
#define CHAR_nn 0x2E
#define CHAR_xa 0x2F
#define CHAR_xi 0x30
#define CHAR_xu 0x31
#define CHAR_xe 0x32
#define CHAR_xo 0x33
#define CHAR_xya 0x34
#define CHAR_xyu 0x35
#define CHAR_xyo 0x36
#define CHAR_ga 0x37
#define CHAR_gi 0x38
#define CHAR_gu 0x39
#define CHAR_ge 0x3A
#define CHAR_go 0x3B
#define CHAR_za 0x3C
#define CHAR_zi 0x3D
#define CHAR_zu 0x3E
#define CHAR_ze 0x3F
#define CHAR_zo 0x40
#define CHAR_da 0x41
#define CHAR_di 0x42
#define CHAR_du 0x43
#define CHAR_de 0x44
#define CHAR_do 0x45
#define CHAR_ba 0x46
#define CHAR_bi 0x47
#define CHAR_bu 0x48
#define CHAR_be 0x49
#define CHAR_bo 0x4A
#define CHAR_pa 0x4B
#define CHAR_pi 0x4C
#define CHAR_pu 0x4D
#define CHAR_pe 0x4E
#define CHAR_po 0x4F
#define CHAR_xtu 0x50
#define CHAR_AA 0x51
#define CHAR_II 0x52
#define CHAR_UU 0x53
#define CHAR_EE 0x54
#define CHAR_OO 0x55
#define CHAR_KA 0x56
#define CHAR_KI 0x57
#define CHAR_KU 0x58
#define CHAR_KE 0x59
#define CHAR_KO 0x5A
#define CHAR_SA 0x5B
#define CHAR_SI 0x5C
#define CHAR_SU 0x5D
#define CHAR_SE 0x5E
#define CHAR_SO 0x5F
#define CHAR_TA 0x60
#define CHAR_TI 0x61
#define CHAR_TU 0x62
#define CHAR_TE 0x63
#define CHAR_TO 0x64
#define CHAR_NA 0x65
#define CHAR_NI 0x66
#define CHAR_NU 0x67
#define CHAR_NE 0x68
#define CHAR_NO 0x69
#define CHAR_HA 0x6A
#define CHAR_HI 0x6B
#define CHAR_HU 0x6C
#define CHAR_HE 0x6D
#define CHAR_HO 0x6E
#define CHAR_MA 0x6F
#define CHAR_MI 0x70
#define CHAR_MU 0x71
#define CHAR_ME 0x72
#define CHAR_MO 0x73
#define CHAR_YA 0x74
#define CHAR_YU 0x75
#define CHAR_YO 0x76
#define CHAR_RA 0x77
#define CHAR_RI 0x78
#define CHAR_RU 0x79
#define CHAR_RE 0x7A
#define CHAR_RO 0x7B
#define CHAR_WA 0x7C
#define CHAR_WO 0x7D
#define CHAR_NN 0x7E
#define CHAR_XA 0x7F
#define CHAR_XI 0x80
#define CHAR_XU 0x81
#define CHAR_XE 0x82
#define CHAR_XO 0x83
#define CHAR_XYA 0x84
#define CHAR_XYU 0x85
#define CHAR_XYO 0x86
#define CHAR_GA 0x87
#define CHAR_GI 0x88
#define CHAR_GU 0x89
#define CHAR_GE 0x8A
#define CHAR_GO 0x8B
#define CHAR_ZA 0x8C
#define CHAR_ZI 0x8D
#define CHAR_ZU 0x8E
#define CHAR_ZE 0x8F
#define CHAR_ZO 0x90
#define CHAR_DA 0x91
#define CHAR_DI 0x92
#define CHAR_DU 0x93
#define CHAR_DE 0x94
#define CHAR_DO 0x95
#define CHAR_BA 0x96
#define CHAR_BI 0x97
#define CHAR_BU 0x98
#define CHAR_BE 0x99
#define CHAR_BO 0x9A
#define CHAR_PA 0x9B
#define CHAR_PI 0x9C
#define CHAR_PU 0x9D
#define CHAR_PE 0x9E
#define CHAR_PO 0x9F
#define CHAR_XTU 0xA0
#define CHAR_0              0xA1
#define CHAR_1              0xA2
#define CHAR_2              0xA3
#define CHAR_3              0xA4
#define CHAR_4              0xA5
#define CHAR_5              0xA6
#define CHAR_6              0xA7
#define CHAR_7              0xA8
#define CHAR_8              0xA9
#define CHAR_9              0xAA
#define CHAR_EXCL_MARK      0xAB
#define CHAR_QUESTION_MARK  0xAC
#define CHAR_PERIOD         0xAD
#define CHAR_HYPHEN         0xAE
#define CHAR_ELLIPSIS       0xB0
#define CHAR_DBL_QUOT_LEFT  0xB1
#define CHAR_DBL_QUOT_RIGHT 0xB2
#define CHAR_SGL_QUOT_LEFT  0xB3
#define CHAR_SGL_QUOT_RIGHT 0xB4
#define CHAR_MALE           0xB5
#define CHAR_FEMALE         0xB6
#define CHAR_CURRENCY       0xB7
#define CHAR_COMMA          0xB8
#define CHAR_MULT_SIGN      0xB9
#define CHAR_SLASH          0xBA
#define CHAR_A              0xBB
#define CHAR_B              0xBC
#define CHAR_C              0xBD
#define CHAR_D              0xBE
#define CHAR_E              0xBF
#define CHAR_F              0xC0
#define CHAR_G              0xC1
#define CHAR_H              0xC2
#define CHAR_I              0xC3
#define CHAR_J              0xC4
#define CHAR_K              0xC5
#define CHAR_L              0xC6
#define CHAR_M              0xC7
#define CHAR_N              0xC8
#define CHAR_O              0xC9
#define CHAR_P              0xCA
#define CHAR_Q              0xCB
#define CHAR_R              0xCC
#define CHAR_S              0xCD
#define CHAR_T              0xCE
#define CHAR_U              0xCF
#define CHAR_V              0xD0
#define CHAR_W              0xD1
#define CHAR_X              0xD2
#define CHAR_Y              0xD3
#define CHAR_Z              0xD4
#define CHAR_a              0xD5
#define CHAR_b              0xD6
#define CHAR_c              0xD7
#define CHAR_d              0xD8
#define CHAR_e              0xD9
#define CHAR_f              0xDA
#define CHAR_g              0xDB
#define CHAR_h              0xDC
#define CHAR_i              0xDD
#define CHAR_j              0xDE
#define CHAR_k              0xDF
#define CHAR_l              0xE0
#define CHAR_m              0xE1
#define CHAR_n              0xE2
#define CHAR_o              0xE3
#define CHAR_p              0xE4
#define CHAR_q              0xE5
#define CHAR_r              0xE6
#define CHAR_s              0xE7
#define CHAR_t              0xE8
#define CHAR_u              0xE9
#define CHAR_v              0xEA
#define CHAR_w              0xEB
#define CHAR_x              0xEC
#define CHAR_y              0xED
#define CHAR_z              0xEE
#define CHAR_SPECIAL_F7     0xF7
#define CHAR_SPECIAL_F8     0xF8
#define CHAR_SPECIAL_F9     0xF9
#define CHAR_COLON          0xF0
#define CHAR_PROMPT_SCROLL  0xFA // waits for button press and scrolls dialog
#define CHAR_PROMPT_CLEAR   0xFB // waits for button press and clears dialog
#define EXT_CTRL_CODE_BEGIN 0xFC // extended control code
#define PLACEHOLDER_BEGIN   0xFD // string placeholder
#define CHAR_NEWLINE        0xFE
#define EOS                 0xFF // end of string

// Special F9 chars
#define CHAR_UP_ARROW_2    0x00
#define CHAR_DOWN_ARROW_2  0x01
#define CHAR_LEFT_ARROW_2  0x02
#define CHAR_RIGHT_ARROW_2 0x03
#define CHAR_PLUS_2        0x04
#define CHAR_LV_2          0x05
#define CHAR_PP            0x06
#define CHAR_ID            0x07
#define CHAR_No            0x08
#define CHAR_UNDERSCORE    0x09

#define EXT_CTRL_CODE_COLOR     0x1
#define EXT_CTRL_CODE_HIGHLIGHT 0x2
#define EXT_CTRL_CODE_SHADOW    0x3
//
#define EXT_CTRL_CODE_UNKNOWN_7 0x7
//
#define EXT_CTRL_CODE_CLEAR     0x11
//
#define EXT_CTRL_CODE_CLEAR_TO  0x13
#define EXT_CTRL_CODE_MIN_LETTER_SPACING 0x14
#define EXT_CTRL_CODE_JPN       0x15
#define EXT_CTRL_CODE_ENG       0x16

#define TEXT_COLOR_TRANSPARENT  0x0
#define TEXT_COLOR_WHITE        0x1
#define TEXT_COLOR_DARK_GREY    0x2
#define TEXT_COLOR_LIGHT_GREY   0x3
#define TEXT_COLOR_RED          0x4
#define TEXT_COLOR_LIGHT_RED    0x5
#define TEXT_COLOR_GREEN        0x6
#define TEXT_COLOR_LIGHT_GREEN  0x7
#define TEXT_COLOR_BLUE         0x8
#define TEXT_COLOR_LIGHT_BLUE   0x9
#define TEXT_DYNAMIC_COLOR_1    0xA // Usually white
#define TEXT_DYNAMIC_COLOR_2    0xB // Usually white w/ tinge of green
#define TEXT_DYNAMIC_COLOR_3    0xC // Usually white
#define TEXT_DYNAMIC_COLOR_4    0xD // Usually aquamarine
#define TEXT_DYNAMIC_COLOR_5    0xE // Usually blue-green
#define TEXT_DYNAMIC_COLOR_6    0xF // Usually cerulean

#define PLACEHOLDER_ID_UNKNOWN       0x0
#define PLACEHOLDER_ID_PLAYER        0x1
#define PLACEHOLDER_ID_STRING_VAR_1  0x2
#define PLACEHOLDER_ID_STRING_VAR_2  0x3
#define PLACEHOLDER_ID_STRING_VAR_3  0x4
#define PLACEHOLDER_ID_KUN           0x5
#define PLACEHOLDER_ID_RIVAL         0x6
#define PLACEHOLDER_ID_VERSION       0x7
#define PLACEHOLDER_ID_AQUA          0x8
#define PLACEHOLDER_ID_MAGMA         0x9
#define PLACEHOLDER_ID_ARCHIE        0xA 
#define PLACEHOLDER_ID_MAXIE         0xB
#define PLACEHOLDER_ID_KYOGRE        0xC
#define PLACEHOLDER_ID_GROUDON       0xD

// battle placeholders are located in battle_message.h

#define NUM_TEXT_PRINTERS 32

#define TEXT_SPEED_FF 0xFF

enum
{
    FONTATTR_MAX_LETTER_WIDTH,
    FONTATTR_MAX_LETTER_HEIGHT,
    FONTATTR_LETTER_SPACING,
    FONTATTR_LINE_SPACING,
    FONTATTR_UNKNOWN,   // dunno what this is yet
    FONTATTR_COLOR_FOREGROUND,
    FONTATTR_COLOR_BACKGROUND,
    FONTATTR_COLOR_SHADOW
};

struct TextPrinterSubStruct
{
    u8 glyphId:4;  // 0x14
    bool8 hasPrintBeenSpedUp:1;
    u8 unk:3;
    u8 downArrowDelay:5;
    u8 downArrowYPosIdx:2;
    bool8 hasGlyphIdBeenSet:1;
    u8 autoScrollDelay;
};

struct TextPrinterTemplate
{
    const u8* currentChar;
    u8 windowId;
    u8 fontId;
    u8 x;
    u8 y;
    u8 currentX;        // 0x8
    u8 currentY;
    u8 letterSpacing;
    u8 lineSpacing;
    u8 unk:4;   // 0xC
    u8 fgColor:4;
    u8 bgColor:4;
    u8 shadowColor:4;
};

struct TextPrinter
{
    struct TextPrinterTemplate printerTemplate;

    void (*callback)(struct TextPrinterTemplate *, u16); // 0x10

    union __attribute__((packed)) {
        struct TextPrinterSubStruct sub;
        u8 fields[7];
    } subUnion;

    u8 active;
    u8 state;       // 0x1C
    u8 textSpeed;
    u8 delayCounter;
    u8 scrollDistance;
    u8 minLetterSpacing;  // 0x20
    u8 japanese;
};

struct FontInfo
{
    u16 (*fontFunction)(struct TextPrinter *x);
    u8 maxLetterWidth;
    u8 maxLetterHeight;
    u8 letterSpacing;
    u8 lineSpacing;
    u8 unk:4;
    u8 fgColor:4;
    u8 bgColor:4;
    u8 shadowColor:4;
};

extern const struct FontInfo *gFonts;

struct GlyphWidthFunc
{
    u32 fontId;
    u32 (*func)(u16 glyphId, bool32 isJapanese);
};

struct KeypadIcon
{
    u16 tileOffset;
    u8 width;
    u8 height;
};

typedef struct {
    bool8 canABSpeedUpPrint:1;
    bool8 useAlternateDownArrow:1;
    bool8 autoScroll:1;
    bool8 forceMidTextSpeed:1;
} TextFlags;

struct Struct_03002FC8
{
    u32 unk0[8];
    u32 unk20[8];
    u32 unk40[8];
    u32 unk60[8];
    u8 unk80;
    u8 unk81;
};

struct __attribute__((packed)) TextColor
{
    u8 bgColor;
    u8 fgColor;
    u8 shadowColor;
};

extern TextFlags gTextFlags;

extern u8 gUnknown_03002FBC;
extern struct Struct_03002FC8 gUnknown_03002FC8;

u16 __attribute__((long_call)) AddTextPrinterParameterized(u8 windowId, u8 fontId, const u8 *str, u8 x, u8 y, u8 speed, void (*callback)(struct TextPrinterTemplate *, u16));
s32 __attribute__((long_call)) GetStringWidth(u8 fontId, const u8 *str, s16 letterSpacing);
u8 __attribute__((long_call)) GetFontAttribute(u8 fontId, u8 attributeId);
void __attribute__((long_call)) RunTextPrinters(void);

/*
extern u8 gStringVar1[];
extern u8 gStringVar2[];
extern u8 gStringVar3[];
extern u8 gStringVar4[];

void SetFontsPointer(const struct FontInfo *fonts);
void DeactivateAllTextPrinters(void);
bool16 AddTextPrinter(struct TextSubPrinter *textSubPrinter, u8 speed, void (*callback)(struct TextSubPrinter *, u16));
void RunTextPrinters(void);
bool16 IsTextPrinterActive(u8 id);
*/

u32 __attribute__((long_call)) RenderFont(struct TextPrinter *textPrinter);

/*
void GenerateFontHalfRowLookupTable(u8 fgColor, u8 bgColor, u8 shadowColor);
void SaveTextColors(u8 *fgColor, u8 *bgColor, u8 *shadowColor);
void RestoreTextColors(u8 *fgColor, u8 *bgColor, u8 *shadowColor);
void DecompressGlyphTile(const u16 *src, u16 *dest);
u8 GetLastTextColor(u8 colorType);
void CopyGlyphToWindow(struct TextPrinter *x);
void ClearTextSpan(struct TextPrinter *textPrinter, u32 width);

u16 Font0Func(struct TextPrinter *textPrinter);
u16 Font1Func(struct TextPrinter *textPrinter);
u16 Font2Func(struct TextPrinter *textPrinter);
u16 Font3Func(struct TextPrinter *textPrinter);
u16 Font4Func(struct TextPrinter *textPrinter);
u16 Font5Func(struct TextPrinter *textPrinter);
u16 Font7Func(struct TextPrinter *textPrinter);
u16 Font8Func(struct TextPrinter *textPrinter);

void TextPrinterInitDownArrowCounters(struct TextPrinter *textPrinter);
void TextPrinterDrawDownArrow(struct TextPrinter *textPrinter);
void TextPrinterClearDownArrow(struct TextPrinter *textPrinter);
bool8 TextPrinterWaitAutoMode(struct TextPrinter *textPrinter);
bool16 TextPrinterWaitWithDownArrow(struct TextPrinter *textPrinter);
bool16 TextPrinterWait(struct TextPrinter *textPrinter);
void DrawDownArrow(u8 windowId, u16 x, u16 y, u8 bgColor, bool8 drawArrow, u8 *counter, u8 *yCoordIndex);
u16 RenderText(struct TextPrinter *textPrinter);
s32 GetStringWidthFixedWidthFont(const u8 *str, u8 fontId, u8 letterSpacing);
s32 (*GetFontWidthFunc(u8 glyphId))(u16, bool32);
u8 RenderTextFont9(u8 *pixels, u8 fontId, u8 *str);
u8 DrawKeypadIcon(u8 windowId, u8 keypadIconId, u16 x, u16 y);
u8 GetKeypadIconTileOffset(u8 keypadIconId);
u8 GetKeypadIconWidth(u8 keypadIconId);
u8 GetKeypadIconHeight(u8 keypadIconId);
void SetDefaultFontsPointer(void);
u8 GetFontAttribute(u8 fontId, u8 attributeId);
u8 GetMenuCursorDimensionByFont(u8 fontId, u8 whichDimension);
void DecompressGlyphFont0(u16 glyphId, bool32 isJapanese);
s32 GetGlyphWidthFont0(u16 glyphId, bool32 isJapanese);
void DecompressGlyphFont7(u16 glyphId, bool32 isJapanese);
s32 GetGlyphWidthFont7(u16 glyphId, bool32 isJapanese);
void DecompressGlyphFont8(u16 glyphId, bool32 isJapanese);
s32 GetGlyphWidthFont8(u16 glyphId, bool32 isJapanese);
void DecompressGlyphFont2(u16 glyphId, bool32 isJapanese);
s32 GetGlyphWidthFont2(u16 glyphId, bool32 isJapanese);
void DecompressGlyphFont1(u16 glyphId, bool32 isJapanese);
s32 GetGlyphWidthFont1(u16 glyphId, bool32 isJapanese);
void DecompressGlyphFont9(u16 glyphId);
s32 GetGlyphWidthFont3(u16 glyphId, bool32 isJapanese);
s32 GetGlyphWidthFont4(u16 glyphId, bool32 isJapanese);
s32 GetGlyphWidthFont5(u16 glyphId, bool32 isJapanese);
void sub_80062B0(struct Sprite *sprite);
*/
#endif // GUARD_TEXT_H
